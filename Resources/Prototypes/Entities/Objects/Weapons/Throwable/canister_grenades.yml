- type: entity
  parent: [VolatileGrenadeBase, GrenadeBase, BaseSecurityContraband ]
  id: SmokeGrenade
  name: smoke grenade
  description: A tactical grenade that releases a large, long-lasting cloud of smoke when used.
  components:
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Grenades/smoke.rsi #imp
  - type: SmokeOnTrigger
    keysIn:
    - timer
    duration: 30
    spreadAmount: 50
  - type: EmitSoundOnTrigger
    keysIn:
    - timer
    sound: /Audio/Effects/smoke.ogg #imp
    positional: true
  - type: DeleteOnTrigger
    keysIn:
    - timer
  - type: TimerTriggerVisuals
    primingSound:
      path: /Audio/Items/smoke_grenade_prime.ogg

- type: entity
  parent: [ BaseServiceContraband, SmokeGrenade ] #imp edit
  id: CleanerGrenade
  name: cleanade
  description: A special grenade for janitors, releasing large cloud of space cleaner foam. #imp
  components:
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Grenades/janitor.rsi #imp
  - type: SmokeOnTrigger
    keysIn:
    - timer
    duration: 15
    spreadAmount: 50
    smokePrototype: Foam
    solution:
      reagents:
      - ReagentId: SpaceCleaner
        Quantity: 30
  # imp edit start
  - type: EmitSoundOnTrigger
    keysIn:
    - timer
    sound: /Audio/Items/smoke_grenade_smoke.ogg
  - type: Tag
    tags:
    - CleanerGrenade
    - Grenade
  - type: CartridgeAmmo
    proto: BulletGrenadeCleaner
    deleteOnSpawn: true
  # imp edit end

- type: entity
  parent: SmokeGrenade
  id: TearGasGrenade
  name: tear gas grenade
  description: A chemical irritant grenade intended for riot control. Makes you cry your eyes out and cough your lungs out. #imp
  components:
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Grenades/tear_gas.rsi #imp
  - type: SmokeOnTrigger
    keysIn:
    - timer
    duration: 15 #imp
    spreadAmount: 30
    smokePrototype: TearGasSmokeWhite
    solution:
      reagents:
      - ReagentId: TearGas
        Quantity: 20

- type: entity
  parent: [ BaseEngineeringContraband, SmokeGrenade ]
  id: MetalFoamGrenade
  name: metal foam grenade
  description: An emergency tool used for patching hull breaches with special quick-set metal foam. Almost as good as real floors!
  components:
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Grenades/metalfoam.rsi #imp
  - type: TimerTrigger
    delay: 5
  - type: EmitSoundOnTrigger #imp
    keysIn:
    - timer
    sound: /Audio/Items/smoke_grenade_smoke.ogg
  - type: SmokeOnTrigger
    keysIn:
    - timer
    duration: 2 # imp 10 -> 2
    spreadAmount: 5 #imp 20 ->5
    smokePrototype: AluminiumMetalFoam
  - type: StaticPrice
    price: 350

- type: entity
  parent: [ BaseEngineeringContraband, VolatileGrenadeBase, GrenadeBase ] # Prevent inheriting DeleteOnTrigger from SmokeGrenade
  id: AirGrenade
  name: air grenade
  description: A special solid state chemical grenade used for quickly releasing standard air into a spaced area. Fills up to 30 tiles!
  components:
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Grenades/airboom.rsi #imp
  - type: EmitSoundOnTrigger
    keysIn:
    - timer
    sound: /Audio/Items/smoke_grenade_smoke.ogg
  - type: TimerTriggerVisuals
    primingSound:
      path: /Audio/Items/smoke_grenade_prime.ogg
  - type: TimerTrigger
    delay: 3
  - type: ReleaseGasOnTrigger
    keysIn:
    - timer
    removeFraction: 0.25
    air:
      volume: 1000
      moles: # Target is 3117.84 mols total for filling 30 tiles (goal is 101.325 kPa @ 20C)
        Oxygen: 654.7464 # oxygen
        Nitrogen: 2463.0936 # nitrogen
      temperature: 293.15
  - type: StaticPrice
    price: 350
  - type: GenericVisualizer
    visuals:
      enum.ReleaseGasOnTriggerVisuals.Key:
        enabled:
          True: { state: active }
          False: { state: spent }
      enum.Trigger.TriggerVisuals.VisualState: #imp everything in this little category
        enum.ConstructionVisuals.Layer:
          Primed: { state: primed }
          Unprimed: { state: icon }
        triggerlight:
          Primed: { visible: true }
          Unprimed: { visible: false }

